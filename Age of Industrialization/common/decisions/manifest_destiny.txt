manifest_destiny = {

	is_shown = {
		exists = c:USA
		root = c:USA
		NOT = { has_variable = manifested_destiny }
	}

	possible = {
		has_technology_researched = nationalism
	}

	when_taken = {
		if = {
			limit = {
				owns_entire_state_region = STATE_CALIFORNIA
				owns_entire_state_region = STATE_NEVADA
				owns_entire_state_region = STATE_UTAH
				owns_entire_state_region = STATE_ARIZONA
				owns_entire_state_region = STATE_NEW_MEXICO
				owns_entire_state_region = STATE_TEXAS
			}
			trigger_event = { id = manifest_destiny.1 }
		}
		else = {
			add_journal_entry = {
				type = je_manifest_destiny_mexico
			}
		}
		if = {
			limit = {
				owns_entire_state_region = STATE_MONTANA
				owns_entire_state_region = STATE_WYOMING
				owns_entire_state_region = STATE_COLORADO
				owns_entire_state_region = STATE_NORTH_DAKOTA
				owns_entire_state_region = STATE_SOUTH_DAKOTA
				owns_entire_state_region = STATE_NEBRASKA
				owns_entire_state_region = STATE_KANSAS
			}
			trigger_event = { id = manifest_destiny.2 }
		}
		else = {
			add_journal_entry = {
				type = je_manifest_destiny_frontier_wars
			}
		}
		ig:ig_landowners = {
			add_modifier = {
				name = ig_manifest_destiny
				months = normal_modifier_time
			}
		}
		ig:ig_intelligentsia = {
			add_modifier = {
				name = ig_manifest_destiny
				months = normal_modifier_time
				multiplier = -1
			}
		}
		if = {
			limit = {
				exists = c:MEX
			}
			create_incident = {
				country = c:MEX
				value = 20
			}
		}	
		# Add Claims
		s:STATE_CALIFORNIA = { 
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		s:STATE_NEVADA = {  
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		s:STATE_UTAH = { 
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		s:STATE_ARIZONA = { 
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		s:STATE_NEW_MEXICO = { 
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		s:STATE_OKLAHOMA = { 
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		#If Texas has already been annexed and part owned by MEX, and USA does not already have claim, give USA the claim
		s:STATE_TEXAS = {
			if = {
				limit = {
					NOT = {
						exists = c:TEX
						ROOT = {
							has_claim = s:STATE_TEXAS
						}
					}
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT
			}
		}
		s:STATE_MONTANA = { 
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		s:STATE_WYOMING = {  
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		s:STATE_COLORADO = { 
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		s:STATE_NORTH_DAKOTA = { 
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		s:STATE_SOUTH_DAKOTA = { 
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		s:STATE_NEBRASKA = { 
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}
		s:STATE_KANSAS = { 
			if = {
				limit = {
					any_scope_state = {
						owner = c:MEX
					}
				}
				add_claim = ROOT 
			}
		}

		set_variable = manifested_destiny
	}

	ai_chance = {
		base = 10
	}
}

mexican_american_war = {
	is_shown = {
		exists = c:USA
		root = c:USA
		NOT = {
			exists = c:TEX
		}
		c:USA = {
			has_variable = manifested_destiny #already took Manifest Destiny decision
			NOT = {
				has_variable = mexican_american_war #war hasn't happened yet
			}
		}
	}

	possible = {
		exists = c:USA
		is_diplomatic_play_committed_participant = no
 		is_at_war = no
		custom_tooltip = {
			text = manifest_destiny_tt0
			c:USA = {
				has_variable = manifested_destiny
				NOT = {
					has_variable = mexican_american_war
				}
			}
		}
		c:USA = {
			in_default = no
			taking_loans = no
		}

	}

	when_taken = {
		c:USA = {
			set_variable = mexican_american_war
		}
		add_journal_entry = {
			type = je_manifest_destiny_mexican_american_war
		}
		c:USA = { trigger_event = { id = manifest_destiny.5 } }

		}

	ai_chance = {
		base = -9

		modifier = {
			trigger = { year >= 1840 }
			add = 5
		}
		modifier = {
			trigger = { year >= 1843 }
			add = 5
		}	
		modifier = {
			trigger = { year >= 1845 }
			add = 5
		}		
		modifier = {
			trigger = { year >= 1846 }
			add = 10
		}
		modifier = {
			trigger = { year >= 1847 }
			add = 10
		}
		
		modifier = {
			trigger = { owns_entire_state_region = STATE_WASHINGTON}
			add = 10
		}

		modifier = {
			trigger = { 
				ruler = {has_ideology = ideology_jingoist_leader}
			}
			add = 100
		}
		
	#	modifier = {
	#		trigger = { 
	#			ruler = {has_ideology = ideology_pacifist}
	#		}
	#		add = -100
	#	}
	#	modifier = {
	#		trigger = { 
	#			c:USA= {relations:root >= relations_threshold:neutral}
	#		}
	#		add = -5
	#	}
	#	modifier = {
	#		trigger = { 
	#			c:USA= {relations:root >= relations_threshold:amicable}
	#		}
	#		add = -10
	#	}

	}
}